{
  "hash": "58fbd6610d104570e0581cad2a8581b2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Max or No Max?\"\ncode-fold: true\n---\n\n\n\n\n\n\n\nThere's been a recent spat between the heavy metal bands Sepultura and Soulfly. For those unaware of the history, 50% of Sepulture used to be the Cavalera brothers (Max and Igor) until Max (the frontman and guitarist) left the band in 1996 and formed Soulfly. The full story is [here](https://en.wikipedia.org/wiki/Sepultura). There's a lot of bad blood even 20 years later, and according to a recent story on [metal sucks](https://www.metalsucks.net/2016/03/24/sepultura-cavalera-brothers-play-festival-gloria-cavalera-attacks-current-sepultura-line-social-media/), Soulfly's manager (and Max's wife) Gloria Cavalier recently posted a fairly pointed post on her Facebook page. This got picked up by my favourite podcast (the metal sucks podcast). What has this got to do with me, or statistics? Well, one of the presenters of the metal sucks podcasts asked me this over Twitter:\n\n![](godless_tweets.png)\n\nAfter a very brief comment about needing to operationalise 'better', I decided that rather than reading book proofs I'd do a tongue in cheek analysis of what is better max or no max and here it is.\n\nFirst we need to operationalise 'better'. I have done this by accepting subjective opinion as determining 'better' and specifically ratings of albums on amazon.com (although I am English metal sucks is US based, so I thought I'd pander to them and take ratings from the US site). Our questions then becomes 'is max or no max rated higher by the sorts of people who leave reviews on Amazon'. We have operationalised our questions and turned it into a scientific statement, which we can test with data. [There are all sorts of problems with using these ratings, not least of which is that they tend to be positively biased, and they likely reflect a certain type of person who reviews, often reviews reflect things other than the music (e.g., arrived quickly 5*), and so on … but fuck it, this is not serious science, just a bit of a laugh.]\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# You can generate the data using this R code (data correct as of today):\n\ncreate_tibble <- function(name, year, data){\n  tibble::tibble(\n    Album = rep(name, length(data)),\n    Year = rep(year, length(data)),\n    Rating = data\n  )\n}\n\n\n\nmorbid <- create_tibble(\"Morbid\", \"1986\", c(rep(1,2), rep(2, 4), rep(3, 3), rep(4, 8), rep(5, 36)))\nschizo <- create_tibble(\"Schizo\", \"1987\",  c(rep(1,1), rep(2, 2), rep(3, 4), rep(4, 10), rep(5, 33)))\nremains <- create_tibble(\"Remains\", \"1989\",  c(2, rep(3, 5), rep(4, 9), rep(5, 104)))\narise <- create_tibble(\"Arise\", \"1991\", c(rep(2, 2), rep(4, 16), rep(5, 89)))\nchaos <- create_tibble(\"Chaos\", \"1993\", c(rep(1,4), rep(2, 2), rep(3, 9), rep(4, 20), rep(5, 120)))\nroots <- create_tibble(\"Roots\", \"1996\", c(rep(1,9), rep(2, 8), rep(3, 17), rep(4, 24), rep(5, 94)))\nagainst <- create_tibble(\"Against\", \"1998\", c(rep(1,16), rep(2, 14), rep(3, 11), rep(4, 20), rep(5, 32)))\nnation <- create_tibble(\"Nation\", \"2001\", c(rep(1,3), rep(2, 7), rep(3, 6), rep(4, 22), rep(5, 19)))\nroorback <- create_tibble(\"Roorback\", \"2003\", c(rep(1,6), rep(2, 6), rep(3, 5), rep(4, 13), rep(5, 20)))\ndante <- create_tibble(\"Dante\", \"2006\", c(rep(1,1), rep(2, 3), rep(3, 4), rep(4, 8), rep(5, 30)))\nalex <- create_tibble(\"Alex\", \"2009\", c(rep(1,1), rep(2, 1), rep(3, 3), rep(4, 6), rep(5, 18)))\nkairos <- create_tibble(\"Kairos\", \"2011\", c(rep(1,3), rep(2, 2), rep(3, 2), rep(4, 6), rep(5, 33)))\nmediator <- create_tibble(\"Mediator\", \"2013\", c(rep(1,0), rep(2, 3), rep(3, 4), rep(4, 6), rep(5, 21)))\n  \nsepultura <- rbind(morbid, schizo, remains, arise, chaos, roots, against, nation, dante, alex, kairos, mediator) |> \n  dplyr::mutate(\n    Max = ifelse(as.numeric(Year) < 1998, \"Max\", \"No Max\"),\n    Band = \"Sepultura\"\n  )\n\n  \n  soulfly <- create_tibble(\"Soulfly\", \"1998\", c(rep(1,8), rep(2, 9), rep(3, 4), rep(4, 16), rep(5, 89)))\n  primitive <- create_tibble(\"Primitive\", \"2000\", c(rep(1,11), rep(2, 5), rep(3, 5), rep(4, 19), rep(5, 53)))\n  three <- create_tibble(\"Three\", \"2002\",c(rep(1,1), rep(2, 10), rep(3, 12), rep(4, 7), rep(5, 19)))\n  prophecy <- create_tibble(\"Prophecy\", \"2004\",c(rep(1,2), rep(2, 5), rep(3, 5), rep(4, 25), rep(5, 42)))\n  darkages <- create_tibble(\"Dark Ages\", \"2005\",c(rep(1,1), rep(2, 1), rep(3, 5), rep(4, 18), rep(5, 36)))\n  conquer <- create_tibble(\"Conquer\", \"2008\",c(rep(1,1), rep(2, 0), rep(3, 5), rep(4, 5), rep(5, 31)))\n  omen <- create_tibble(\"Omen\", \"2010\",c(rep(1,0), rep(2, 2), rep(3, 1), rep(4, 6), rep(5, 17)))\n  enslaved <- create_tibble(\"Enslaved\", \"2012\",c(rep(1,1), rep(2,1), rep(3, 4), rep(4, 2), rep(5, 30)))\n  savages <- create_tibble(\"Savages\", \"2013\",c(rep(1,0), rep(2, 2), rep(3, 3), rep(4, 10), rep(5, 27)))\n  archangel <- create_tibble(\"Archangel\", \"2015\",c(rep(1,3), rep(2, 2), rep(3, 4), rep(4, 7), rep(5, 21)))\n\n\n  soulfly <- rbind(soulfly, primitive, three, prophecy, darkages, conquer, omen, enslaved, savages, archangel) |> \n    dplyr::mutate(\n      Max = \"Max\",\n      Band = \"Soulfly\"\n  )\n  \n  maxvsnomax <- dplyr::bind_rows(sepultura, soulfly) |> \n    dplyr::mutate(\n      Band = forcats::as_factor(Band),\n      Max = forcats::as_factor(Max),\n      Album = forcats::as_factor(Album),\n    )\n```\n:::\n\n\n\n\n\n\n## Post Sepultura: Max or No Max\n\nThe first question is whether post-max Sepultura or Soulfly are rated higher. Figure 1 shows that the data are hideously skewed with people tending to give positive reviews and 4-5* ratings. Figure 2 shows the mean ratings by year post Max's departure (note they released albums in different years so the dots are out of synch, but it's a useful timeline). Figure 2 seems to suggest that after the first couple of albums, both bands are rated fairly similarly: the Soulfly line is higher but error bars overlap a lot for all but the first albums.\n\n\tFigure 1: Histograms of all ratings for Soulfly and (Non-Max Era) Sepultura\n\t\n\t\n\tFigure 2: Mean ratings of Soulfly and (Non-Max Era) Sepultura by year of album release\n\nThere are a lot of ways you could look at these data. The first thing is the skew. That messes up estimates of confidence intervals and significance tests … but our sample is likely big enough that we can rely on the central limit theorem to do its magic and let us assume that the sampling distribution is normal (beautifully explained in my new book!)\n\nI'm going to fit three models. The first is an intercept only model (a baseline with no predictors), the second allows intercepts to vary across albums (which allows ratings to vary by album, which seems like a sensible thing to do because albums will vary in quality) the third predicts ratings from the band (Sepultura vs Soulfly).\n\n  maxModel2a<-gls(Rating ~ 1, data = sepvssoul, method = \"ML\")\n  maxModel2b<-lme(Rating ~ 1, random = ~1|Album, data = sepvssoul, method = \"ML\")\n  maxModel2c<-update(maxModel2b, .~. + Band)\n  anova(maxModel2a, maxModel2b, maxModel2c)\n\nBy comparing models we can see:\n\n           Model df      AIC      BIC    logLik   Test  L.Ratio p-value\nmaxModel2a     1  2 2889.412 2899.013 -1442.706                        \nmaxModel2b     2  3 2853.747 2868.148 -1423.873 1 vs 2 37.66536  <.0001\nmaxModel2c     3  4 2854.309 2873.510 -1423.155 2 vs 3  1.43806  0.2305\n\nThat album ratings varied very significantly (not surprising), the p-value is < .0001, but that band did not significantly predict ratings overall (p = .231). If you like you can look at the summary of the model by executing:\n  \n  summary(maxModel2c)\n\nWhich gives us this output:\n\nLinear mixed-effects model fit by maximum likelihood\n Data: sepvssoul \n       AIC     BIC    logLik\n  2854.309 2873.51 -1423.154\n\nRandom effects:\n Formula: ~1 | Album\n        (Intercept) Residual\nStdDev:   0.2705842 1.166457\n\nFixed effects: Rating ~ Band \n               Value Std.Error  DF   t-value p-value\n(Intercept) 4.078740 0.1311196 882 31.107015  0.0000\nBandSoulfly 0.204237 0.1650047  14  1.237765  0.2362\n Correlation: \n            (Intr)\nBandSoulfly -0.795\n\nStandardized Within-Group Residuals:\n       Min         Q1        Med         Q3        Max \n-2.9717684 -0.3367275  0.4998698  0.6230082  1.2686186 \n\nNumber of Observations: 898\nNumber of Groups: 16 \n\nThe difference in ratings between Sepultura and Soulfly was b = 0.20. Ratings for soulfully were higher, but not significantly so (if we allow ratings to vary over albums, if you take that random effect out you'll get a very different picture because that variability will go into the fixed effect of 'band'.).\nMax or No Max\nJust because this isn't fun enough, we could also just look at whether either Sepultura (post 1996) or Soulfly can compete with the Max-era-Sepultura heyday.\nI'm going to fit three models but this time including the early Sepultura albums (with max). The models are the same as before except that the fixed effect of band now has three levels: Sepultura Max, Sepultura no-Max and Soulfly:\n\n  maxModela<-gls(Rating ~ 1, data = maxvsnomax, method = \"ML\")\n  maxModelb<-lme(Rating ~ 1, random = ~1|Album, data = maxvsnomax, method = \"ML\")\n  maxModelc<-update(maxModelb, .~. + Band)\n  anova(maxModela, maxModelb, maxModelc)\n\nBy comparing models we can see:\n\n          Model df      AIC      BIC    logLik   Test   L.Ratio p-value\nmaxModela     1  2 4686.930 4697.601 -2341.465                         \nmaxModelb     2  3 4583.966 4599.973 -2288.983 1 vs 2 104.96454  <.0001\nmaxModelc     3  5 4581.436 4608.114 -2285.718 2 vs 3   6.52947  0.0382\n\nThat album ratings varied very significantly (not surprising), the p-value is < .0001, and the band did significantly predict ratings overall (p = .038). If you like you can look at the summary of the model by executing:\n  \n  summary(maxModelc)\n\nWhich gives us this output:\n\nLinear mixed-effects model fit by maximum likelihood\n Data: maxvsnomax \n       AIC      BIC    logLik\n  4581.436 4608.114 -2285.718\n\nRandom effects:\n Formula: ~1 | Album\n        (Intercept) Residual\nStdDev:     0.25458 1.062036\n\nFixed effects: Rating ~ Band \n                         Value Std.Error   DF  t-value p-value\n(Intercept)           4.545918 0.1136968 1512 39.98281  0.0000\nBandSepultura No Max -0.465626 0.1669412   19 -2.78916  0.0117\nBandSoulfly          -0.262609 0.1471749   19 -1.78433  0.0903\n Correlation: \n                     (Intr) BndSNM\nBandSepultura No Max -0.681       \nBandSoulfly          -0.773  0.526\n\nStandardized Within-Group Residuals:\n       Min         Q1        Med         Q3        Max \n-3.3954974 -0.3147123  0.3708523  0.6268751  1.3987442 \n\nNumber of Observations: 1534\nNumber of Groups: 22  \n\nThe difference in ratings between Sepultura without Max compared to with him was b = -0.47 and significant at p = .012 (ratings for post-max Sepultura are significantly worse than for the Max-era Sepultura). The difference in ratings between Soulfly compared two Max-era Sepultura was b = -0.26 and not significant (p = .09) (ratings for Soulfly are not significantly worse than for the Max-era Sepultura). A couple of points here, p-values are silly, so don't read too much into them, but the parameter (the bs) which quantifies the effect is a bit smaller for Soulfly.\nConfidence Intervals\nInterestingly if you write yourself a little bootstrap routine to get some robust confidence intervals around the parameters:\n  \n\n    boot.lme <- function(data, indices){\n    data <- data[indices,] # select obs. in bootstrap sample\n    model <- lme(Rating ~ Band, random = ~1|Album, data = data, method = \"ML\")\n    fixef(model) # return coefficient vector\n  }\n\nmaxModel.boot<-boot(maxvsnomax, boot.lme, 1000)\n  maxModel.boot\n  boot.ci(maxModel.boot, index = 1, type = “perc”)\n  boot.ci(maxModel.boot, index = 2, type = “perc”)\n\n  boot.ci(maxModel.boot, index = 3, type = “perc”)\n\n\nThen you find these confidence intervals for the three betas (intercept, Post-Max Sepultura vs. Max Era-Sepultura, Soulfly vs. Max-Era-Sepultura):\n\nBOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS\nBased on 1000 bootstrap replicates\n\nCALL : \nboot.ci(boot.out = maxModel.boot, type = “perc”, index = 1)\n\nIntervals : \nLevel     Percentile     \n95%   ( 4.468,  4.620 )  \nCalculations and Intervals on Original Scale\n\nBOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS\nBased on 1000 bootstrap replicates\n\nCALL : \nboot.ci(boot.out = maxModel.boot, type = “perc”, index = 2)\n\nIntervals : \nLevel     Percentile     \n95%   (-0.6153, -0.3100 )  \nCalculations and Intervals on Original Scale\n\nBOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS\nBased on 1000 bootstrap replicates\n\nCALL : \nboot.ci(boot.out = maxModel.boot, type = “perc”, index = 3)\n\nIntervals : \nLevel     Percentile     \n95%   (-0.3861, -0.1503 )  \nCalculations and Intervals on Original Scalens: 1534\nNumber of Groups: 22  \n\nThe difference in ratings between Sepultura without Max compared to with him was b = -0.47 [-0.62, -0.31]. The difference in ratings between Soulfly compared to Max-era Sepultura was b = -0.26 [-0.39, -0.15]. This suggests  that both soulfully and post-Max Sepultura yield negative parameters that reflect (to the degree that you believe that a confidence interval tells you about the population parameter ….) a negative effect in the population. In other words, both bands are rated worse than Max-era Sepultura.\nSummary\nLook, this is just a bit of fun and an excuse to show you how to use a bootstrap on a multilevel model, and how you can use data to try to answer pointless questions thrown at you on Twitter. Based on this hastily thrown together analysis that makes a lot of assumptions about a lot of things, my 120 character twitter response will be: Sepultura Max better than everything, but post 1996 Max is no better than No Max;-)\nR Code\nData\nYou can generate the data using this R code (data correct as of today):\nmorbid<-c(rep(1,2), rep(2, 4), rep(3, 3), rep(4, 8), rep(5, 36))\n  Schizo<-c(rep(1,1), rep(2, 2), rep(3, 4), rep(4, 10), rep(5, 33))\n  remains<-c(2, rep(3, 5), rep(4, 9), rep(5, 104))\n  Arise<-c(rep(2, 2), rep(4, 16), rep(5, 89))\n  Chaos<-c(rep(1,4), rep(2, 2), rep(3, 9), rep(4, 20), rep(5, 120))\n  Roots<-c(rep(1,9), rep(2, 8), rep(3, 17), rep(4, 24), rep(5, 94))\n  Against<-c(rep(1,16), rep(2, 14), rep(3, 11), rep(4, 20), rep(5, 32))\n  Nation<-c(rep(1,3), rep(2, 7), rep(3, 6), rep(4, 22), rep(5, 19))\n  Roorback<-c(rep(1,6), rep(2, 6), rep(3, 5), rep(4, 13), rep(5, 20))\n  Dante<-c(rep(1,1), rep(2, 3), rep(3, 4), rep(4, 8), rep(5, 30))\n  Alex<-c(rep(1,1), rep(2, 1), rep(3, 3), rep(4, 6), rep(5, 18))\n  Kairos<-c(rep(1,3), rep(2, 2), rep(3, 2), rep(4, 6), rep(5, 33))\n  Mediator<- c(rep(1,0), rep(2, 3), rep(3, 4), rep(4, 6), rep(5, 21))\n  \n  \n  morbid<-data.frame(rep(\"Morbid\", length(morbid)), rep(1986, length(morbid)), morbid)\n  Schizo<-data.frame(rep(\"Schizo\", length(Schizo)), rep(1987, length(Schizo)), Schizo)\n  Remains<-data.frame(rep(\"remains\", length(remains)), rep(1989, length(remains)), remains)\n  Arise<-data.frame(rep(\"Arise\", length(Arise)), rep(1991, length(Arise)), Arise)\n  Chaos<-data.frame(rep(\"Chaos\", length(Chaos)), rep(1993, length(Chaos)), Chaos)\n  Roots<-data.frame(rep(\"Roots\", length(Roots)), rep(1996, length(Roots)), Roots)\n  Against<-data.frame(rep(\"Against\", length(Against)), rep(1998, length(Against)), Against)\n  Nation<-data.frame(rep(\"Nation\", length(Nation)), rep(2001, length(Nation)), Nation)\n  Roorback<-data.frame(rep(\"Roorback\", length(Roorback)), rep(2003, length(Roorback)), Roorback)\n  Dante<-data.frame(rep(\"Dante\", length(Dante)), rep(2006, length(Dante)), Dante)\n  Alex<-data.frame(rep(\"Alex\", length(Alex)), rep(2009, length(Alex)), Alex)\n  Kairos<-data.frame(rep(\"Kairos\", length(Kairos)), rep(2011, length(Kairos)), Kairos)\n  Mediator<-data.frame(rep(\"Mediator\", length(Mediator)), rep(2013, length(Mediator)), Mediator)\n  \n  \n  names(morbid)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Schizo)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Remains)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Arise)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Chaos)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Roots)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Against)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Nation)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Dante)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Alex)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Kairos)<-c(\"Album\", \"Year\", \"Rating\")\n  names(Mediator)<-c(\"Album\", \"Year\", \"Rating\")\n\n  SepMax<-rbind(morbid, Schizo, Remains, Arise, Chaos, Roots)\n  SepMax$Band<-\"Sepultura Max\"\n  SepMax$Max<-\"Max\"\n  \n  SepNoMax<-rbind(Against, Nation, Dante, Alex, Kairos, Mediator)\n  SepNoMax$Band<-\"Sepultura No Max\"\n  SepNoMax$Max<-\"No Max\"\n  \n  \n  \n  soulfly<-c(rep(1,8), rep(2, 9), rep(3, 4), rep(4, 16), rep(5, 89))\n  primitive<-c(rep(1,11), rep(2, 5), rep(3, 5), rep(4, 19), rep(5, 53))\n  three<-c(rep(1,1), rep(2, 10), rep(3, 12), rep(4, 7), rep(5, 19))\n  prophecy<-c(rep(1,2), rep(2, 5), rep(3, 5), rep(4, 25), rep(5, 42))\n  darkages<-c(rep(1,1), rep(2, 1), rep(3, 5), rep(4, 18), rep(5, 36))\n  conquer<-c(rep(1,1), rep(2, 0), rep(3, 5), rep(4, 5), rep(5, 31))\n  omen<-c(rep(1,0), rep(2, 2), rep(3, 1), rep(4, 6), rep(5, 17))\n  enslaved<-c(rep(1,1), rep(2,1), rep(3, 4), rep(4, 2), rep(5, 30))\n  savages<-c(rep(1,0), rep(2, 2), rep(3, 3), rep(4, 10), rep(5, 27))\n  archangel<-c(rep(1,3), rep(2, 2), rep(3, 4), rep(4, 7), rep(5, 21))\n\n  \n  soulfly<-data.frame(rep(\"Soulfly\", length(soulfly)), rep(1998, length(soulfly)), soulfly)\n  primitive<-data.frame(rep(\"Primitive\", length(primitive)), rep(2000, length(primitive)), primitive)\n  three<-data.frame(rep(\"Three\", length(three)), rep(2002, length(three)), three)\n  prophecy<-data.frame(rep(\"Prophecy\", length(prophecy)), rep(2004, length(prophecy)), prophecy)\n  darkages<-data.frame(rep(\"Darkages\", length(darkages)), rep(2005, length(darkages)), darkages)\n  conquer<-data.frame(rep(\"Conquer\", length(conquer)), rep(2008, length(conquer)), conquer)\n  omen<-data.frame(rep(\"Omen\", length(omen)), rep(2010, length(omen)), omen)\n  enslaved<-data.frame(rep(\"Enslaved\", length(enslaved)), rep(2012, length(enslaved)), enslaved)\n  savages<-data.frame(rep(\"Savages\", length(savages)), rep(2013, length(savages)), savages)\n  archangel<-data.frame(rep(\"Archangel\", length(archangel)), rep(2015, length(archangel)), archangel)\n  \n  names(soulfly)<-c(\"Album\", \"Year\", \"Rating\")\n  names(primitive)<-c(\"Album\", \"Year\", \"Rating\")\n  names(three)<-c(\"Album\", \"Year\", \"Rating\")\n  names(prophecy)<-c(\"Album\", \"Year\", \"Rating\")\n  names(darkages)<-c(\"Album\", \"Year\", \"Rating\")\n  names(conquer)<-c(\"Album\", \"Year\", \"Rating\")\n  names(omen)<-c(\"Album\", \"Year\", \"Rating\")\n  names(enslaved)<-c(\"Album\", \"Year\", \"Rating\")\n  names(savages)<-c(\"Album\", \"Year\", \"Rating\")\n  names(archangel)<-c(\"Album\", \"Year\", \"Rating\")\n\n  \n  \n  Soulfly<-rbind(soulfly, primitive, three, prophecy, darkages, conquer, omen, enslaved, savages, archangel)\n  Soulfly$Band<-\"Soulfly\"\n  Soulfly$Max<-\"Max\"\n  \n  \n  maxvsnomax<-rbind(SepMax, SepNoMax, Soulfly)\n  maxvsnomax$Band<-factor(maxvsnomax$Band)\n  maxvsnomax$Max<-factor(maxvsnomax$Max)\n  maxvsnomax$Album<-factor(maxvsnomax$Album)\n  \n  sepvssoul<-subset(maxvsnomax, Band != \"Sepultura Max\")\n  sepvssoul$Band<-factor(sepvssoul$Band)\n  sepvssoul$Album<-factor(sepvssoul$Album)\nGraphs in this post\nlibrary(ggplot2)\n\nm <- ggplot(sepvssoul, aes(x = Rating, fill = Band, colour = Band)) \n  m + geom_histogram(binwidth = 1, alpha = .2, position=”identity”) + coord_cartesian(xlim = c(0, 6)) + scale_y_continuous(breaks = seq(0, 400, 50)) + labs(x = “Rating”, y = “Frequency”, colour = “Band”, fill = “Band”) + theme_bw()\n  \n  \n  line <- ggplot(sepvssoul,  aes(Year, Rating, colour = Band))\n  line + stat_summary(fun.y = mean, geom = “point”) + stat_summary(fun.data = mean_cl_boot, geom = “errorbar”, width = 0.2) + labs(x = “Year”, y = “Mean Rating on Amazon.com”) + coord_cartesian(ylim = c(1, 5)) + scale_x_continuous(breaks=seq(1998, 2015, 1))+ theme_bw() + stat_summary(fun.y = mean, geom = “line”, aes(group=Band))\n\n\n\n\nThere's been a recent spat between the heavy metal bands Sepultura and Soulfly. For those unaware of the history, 50% of Sepulture used to be the Cavalera brothers (Max and Igor) until Max (the frontman and guitarist) left the band in 1996 and formed Soulfly. The full story is <a href=\"https://en.wikipedia.org/wiki/Sepultura\" target=\"_blank\">here</a>. There's a lot of bad blood even 20 years later, and according to a recent story on <a href=\"http://www.metalsucks.net/2016/03/24/sepultura-cavalera-brothers-play-festival-gloria-cavalera-attacks-current-sepultura-line-social-media/\" target=\"_blank\">metal sucks</a>, Soulfly's manager (and Max's wife) Gloria Cavalier recently posted a fairly pointed post on her Facebook page. This got picked up by my favourite podcast (the <a href=\"http://www.metalsucks.net/2016/03/28/140-ihsahn/\" target=\"_blank\">metal sucks podcast</a>). What has this got to do with me, or statistics? Well, one of the presenters of the metal sucks podcasts asked me this over Twitter:<br /><br /><a href=\"https://discoveringstatisticscom.files.wordpress.com/2016/03/1f272-2016-03-29_22-15-08.png\"><img border=\"0\" height=\"112\" src=\"https://discoveringstatisticscom.files.wordpress.com/2016/03/1f272-2016-03-29_22-15-08.png?w=300\" width=\"640\" /></a><br /><br />After a very brief comment about needing to operationalise 'better', I decided that rather than reading book proofs I'd do a tongue in cheek analysis of what is better max or no max and here it is.<br /><br />First we need to operationalise 'better'. I have done this by accepting subjective opinion as determining 'better' and specifically ratings of albums on amazon.com (although I am English metal sucks is US based, so I thought I'd pander to them and take ratings from the US site). Our questions then becomes 'is max or no max rated higher by the sorts of people who leave reviews on Amazon'. We have operationalised our questions and turned it into a scientific statement, which we can test with data. [There are all sorts of problems with using these ratings, not least of which is that they tend to be positively biased, and they likely reflect a certain type of person who reviews, often reviews reflect things other than the music (e.g., arrived quickly 5*), and so on ... but fuck it, this is not serious science, just a bit of a laugh.]<br /><br /><h3>Post Sepultura: Max or No Max</h3><div>The first question is whether post-max Sepultura or Soulfly are rated higher. Figure 1 shows that the data are hideously skewed with people tending to give positive reviews and 4-5* ratings. Figure 2 shows the mean ratings by year post Max's departure (note they released albums in different years so the dots are out of synch, but it's a useful timeline). Figure 2 seems to suggest that after the first couple of albums, both bands are rated fairly similarly: the Soulfly line is higher but error bars overlap a lot for all but the first albums.</div><br /><table align=\"center\" cellpadding=\"0\" cellspacing=\"0\" class=\"tr-caption-container\" style=\"margin-left:auto;margin-right:auto;text-align:center;\"><tbody><tr><td style=\"text-align:center;\"><a href=\"https://discoveringstatisticscom.files.wordpress.com/2016/03/26b1a-max2bvs2bno2bmax2bhist.png\" style=\"margin-left:auto;margin-right:auto;\"><img border=\"0\" height=\"456\" src=\"https://discoveringstatisticscom.files.wordpress.com/2016/03/26b1a-max2bvs2bno2bmax2bhist.png?w=300\" width=\"640\" /></a></td></tr><tr><td class=\"tr-caption\" style=\"text-align:center;\"></td><td class=\"tr-caption\"><span style=\"font-size:x-small;\">Figure 1: Histograms of all ratings for Soulfly and (Non-Max Era) Sepultura<br /></span></td><td class=\"tr-caption\"><br /></td></tr></tbody></table><table cellpadding=\"0\" cellspacing=\"0\" class=\"tr-caption-container\" style=\"float:left;margin-right:1em;text-align:left;\"><tbody><tr><td style=\"text-align:center;\"><a href=\"https://discoveringstatisticscom.files.wordpress.com/2016/03/43de7-max2bvs2bno2bmax.png\" style=\"clear:left;margin-bottom:1em;margin-left:auto;margin-right:auto;\"><img border=\"0\" height=\"356\" src=\"https://discoveringstatisticscom.files.wordpress.com/2016/03/43de7-max2bvs2bno2bmax.png?w=300\" width=\"640\" /></a></td></tr><tr><td class=\"tr-caption\" style=\"text-align:center;\"></td><td class=\"tr-caption\"><span style=\"font-size:x-small;\"><br /></span></td><td class=\"tr-caption\"><span style=\"font-size:x-small;\">Figure 2: Mean ratings of Soulfly and (Non-Max Era) Sepultura by year of album release</span><br /></td></tr></tbody></table><br /><h3><br /></h3><h3><br /></h3><h3><br /></h3><h3><br /></h3><h3><br /></h3><h3><br /></h3>There are a lot of ways you could look at these data. The first thing is the skew. That messes up estimates of confidence intervals and significance tests ... but our sample is likely big enough that we can rely on the central limit theorem to do its magic and let us assume that the sampling distribution is normal (beautifully explained in my <a href=\"https://uk.sagepub.com/en-gb/eur/an-adventure-in-statistics/book237529\" target=\"_blank\">new book</a>!)<br /><br />I'm going to fit three models. The first is an intercept only model (a baseline with no predictors), the second allows intercepts to vary across albums (which allows ratings to vary by album, which seems like a sensible thing to do because albums will vary in quality) the third predicts ratings from the band (Sepultura vs Soulfly).<br /><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  maxModel2a&lt;-gls(Rating ~ 1, data = sepvssoul, method = &quot;ML&quot;)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  maxModel2b&lt;-lme(Rating ~ 1, random = ~1|Album, data = sepvssoul, method = &quot;ML&quot;)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  maxModel2c&lt;-update(maxModel2b, .~. + Band)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  anova(maxModel2a, maxModel2b, maxModel2c)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;font-size:x-small;\"><br /></span>By comparing models we can see:<br /><br /><span style=\"font-family:Courier New, Courier, monospace;\">           Model df      AIC      BIC    logLik   Test  L.Ratio p-value</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">maxModel2a     1  2 2889.412 2899.013 -1442.706                        </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">maxModel2b     2  3 2853.747 2868.148 -1423.873 1 vs 2 37.66536  &lt;.0001</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">maxModel2c     3  4 2854.309 2873.510 -1423.155 2 vs 3  1.43806  0.2305</span><br /><br />That album ratings varied very significantly (not surprising), the <i>p</i>-value is &lt; .0001, but that band did not significantly predict ratings overall (<i>p</i> = .231). If you like you can look at the summary of the model by executing:<br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;font-size:x-small;\">  </span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;font-size:x-small;\">  </span><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">summary(maxModel2c)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;font-size:x-small;\"><br /></span>Which gives us this output:<br /><br /><span style=\"font-family:Courier New, Courier, monospace;\">Linear mixed-effects model fit by maximum likelihood</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"> Data: sepvssoul </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">       AIC     BIC    logLik</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">  2854.309 2873.51 -1423.154</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Random effects:</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"> Formula: ~1 | Album</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">        (Intercept) Residual</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">StdDev:   0.2705842 1.166457</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Fixed effects: Rating ~ Band </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">               Value Std.Error  DF   t-value p-value</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">(Intercept) 4.078740 0.1311196 882 31.107015  0.0000</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">BandSoulfly 0.204237 0.1650047  14  1.237765  0.2362</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"> Correlation: </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">            (Intr)</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">BandSoulfly -0.795</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Standardized Within-Group Residuals:</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">       Min         Q1        Med         Q3        Max </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">-2.9717684 -0.3367275  0.4998698  0.6230082  1.2686186 </span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Number of Observations: 898</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Number of Groups: 16 </span><br /><br />The difference in ratings between Sepultura and Soulfly was <i>b</i> = 0.20. Ratings for soulfully were higher, but not significantly so (if we allow ratings to vary over albums, if you take that random effect out you'll get a very different picture because that variability will go into the fixed effect of 'band'.).<br /><br /><h3>Max or No Max</h3><div>Just because this isn't fun enough, we could also just look at whether either Sepultura (post 1996) or Soulfly can compete with the Max-era-Sepultura heyday.</div><div><br /></div><div>I'm going to fit three models but this time including the early Sepultura albums (with max). The models are the same as before except that the fixed effect of band now has three levels: Sepultura Max, Sepultura no-Max and Soulfly:<br /><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\"> </span><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\"> maxModela&lt;-gls(Rating ~ 1, data = maxvsnomax, method = &quot;ML&quot;)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  maxModelb&lt;-lme(Rating ~ 1, random = ~1|Album, data = maxvsnomax, method = &quot;ML&quot;)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  maxModelc&lt;-update(maxModelb, .~. + Band)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  anova(maxModela, maxModelb, maxModelc)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;font-size:x-small;\"><br /></span>By comparing models we can see:<br /><br /><span style=\"font-family:Courier New, Courier, monospace;\">          Model df      AIC      BIC    logLik   Test   L.Ratio p-value</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">maxModela     1  2 4686.930 4697.601 -2341.465                         </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">maxModelb     2  3 4583.966 4599.973 -2288.983 1 vs 2 104.96454  &lt;.0001</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">maxModelc     3  5 4581.436 4608.114 -2285.718 2 vs 3   6.52947  0.0382</span><br /><br />That album ratings varied very significantly (not surprising), the <i>p</i>-value is &lt; .0001, and the band did significantly predict ratings overall (<i>p</i> = .038). If you like you can look at the summary of the model by executing:<br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;font-size:x-small;\">  </span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  summary(</span><span style=\"color:#3d85c6;font-family:'Courier New', Courier, monospace;\">maxModelc</span><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;font-size:x-small;\"><br /></span>Which gives us this output:<br /><br /><span style=\"font-family:Courier New, Courier, monospace;\">Linear mixed-effects model fit by maximum likelihood</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"> Data: maxvsnomax </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">       AIC      BIC    logLik</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">  4581.436 4608.114 -2285.718</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Random effects:</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"> Formula: ~1 | Album</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">        (Intercept) Residual</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">StdDev:     0.25458 1.062036</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Fixed effects: Rating ~ Band </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">                         Value Std.Error   DF  t-value p-value</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">(Intercept)           4.545918 0.1136968 1512 39.98281  0.0000</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">BandSepultura No Max -0.465626 0.1669412   19 -2.78916  0.0117</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">BandSoulfly          -0.262609 0.1471749   19 -1.78433  0.0903</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"> Correlation: </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">                     (Intr) BndSNM</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">BandSepultura No Max -0.681       </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">BandSoulfly          -0.773  0.526</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Standardized Within-Group Residuals:</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">       Min         Q1        Med         Q3        Max </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">-3.3954974 -0.3147123  0.3708523  0.6268751  1.3987442 </span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Number of Observations: 1534</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Number of Groups: 22</span><span style=\"font-family:Courier New, Courier, monospace;font-size:x-small;\"> </span><span style=\"font-family:'Courier New', Courier, monospace;font-size:x-small;\"> </span><br /><br />The difference in ratings between Sepultura without Max compared to with him was <i>b</i> = -0.47 and significant at <i>p</i> = .012 (ratings for post-max Sepultura are significantly worse than for the Max-era Sepultura). The difference in ratings between Soulfly compared two Max-era Sepultura was <i>b</i> = -0.26 and not significant (<i>p</i> = .09) (ratings for Soulfly are not significantly worse than for the Max-era Sepultura). A couple of points here, <i>p</i>-values are silly, so don't read too much into them, but the parameter (the bs) which quantifies the effect is a bit smaller for Soulfly.<br /><br /><h4>Confidence Intervals</h4></div><div>Interestingly if you write yourself a little bootstrap routine to get some robust confidence intervals around the parameters:</div><div><span style=\"color:#3d85c6;font-family:'Courier New', Courier, monospace;font-size:x-small;\">  </span></div><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">    boot.lme &lt;- function(data, indices){</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">    data &lt;- data[indices,] # select obs. in bootstrap sample</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">    model &lt;- lme(Rating ~ Band, random = ~1|Album, data = data, method = &quot;ML&quot;)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">    fixef(model) # return coefficient vector</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  }</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">maxModel.boot&lt;-boot(maxvsnomax, boot.lme, 1000)</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  maxModel.boot</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  boot.ci(maxModel.boot, index = 1, type = \"perc\")</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  boot.ci(maxModel.boot, index = 2, type = \"perc\")</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\"></span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;\">  boot.ci(maxModel.boot, index = 3, type = \"perc\")</span><br /><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;font-size:x-small;\"><br /></span><span style=\"color:#3d85c6;font-family:Courier New, Courier, monospace;font-size:x-small;\"><br /></span>Then you find these confidence intervals for the three betas (intercept, Post-Max Sepultura vs. Max Era-Sepultura, Soulfly vs. Max-Era-Sepultura):<br /><br /><span style=\"font-family:Courier New, Courier, monospace;\">BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Based on 1000 bootstrap replicates</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">CALL : </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">boot.ci(boot.out = maxModel.boot, type = \"perc\", index = 1)</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Intervals : </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Level     Percentile     </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">95%   ( 4.468,  4.620 )  </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Calculations and Intervals on Original Scale</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:'Courier New', Courier, monospace;\">BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Based on 1000 bootstrap replicates</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">CALL : </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">boot.ci(boot.out = maxModel.boot, type = \"perc\", index = 2)</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Intervals : </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Level     Percentile     </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">95%   (-0.6153, -0.3100 )  </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Calculations and Intervals on Original Scale</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:'Courier New', Courier, monospace;\">BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Based on 1000 bootstrap replicates</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">CALL : </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">boot.ci(boot.out = maxModel.boot, type = \"perc\", index = 3)</span><br /><span style=\"font-family:Courier New, Courier, monospace;\"><br /></span><span style=\"font-family:Courier New, Courier, monospace;\">Intervals : </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Level     Percentile     </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">95%   (-0.3861, -0.1503 )  </span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Calculations and Intervals on Original Scale</span><span style=\"font-family:'Courier New', Courier, monospace;\">ns: 1534</span><br /><span style=\"font-family:Courier New, Courier, monospace;\">Number of Groups: 22 </span><span style=\"font-family:'Courier New', Courier, monospace;\"> </span><br /><span style=\"font-family:'Courier New', Courier, monospace;font-size:x-small;\"><br /></span>The difference in ratings between Sepultura without Max compared to with him was <i>b</i> = -0.47 [-0.62, -0.31]. The difference in ratings between Soulfly compared to Max-era Sepultura was <i>b</i> = -0.26 [-0.39, -0.15]. This suggests  that both soulfully and post-Max Sepultura yield negative parameters that reflect (to the degree that you believe that a confidence interval tells you about the population parameter ....) a negative effect in the population. In other words, both bands are rated worse than Max-era Sepultura.<br /><br /><h3>Summary</h3><div>Look, this is just a bit of fun and an excuse to show you how to use a bootstrap on a multilevel model, and how you can use data to try to answer pointless questions thrown at you on Twitter. Based on this hastily thrown together analysis that makes a lot of assumptions about a lot of things, my 120 character twitter response will be: Sepultura Max better than everything, but post 1996 Max is no better than No Max;-)</div><h3>R Code</h3><h4>Data</h4><div>You can generate the data using this R code (data correct as of today):</div><div><br /></div><div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">morbid&lt;-c(rep(1,2), rep(2, 4), rep(3, 3), rep(4, 8), rep(5, 36))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Schizo&lt;-c(rep(1,1), rep(2, 2), rep(3, 4), rep(4, 10), rep(5, 33))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  remains&lt;-c(2, rep(3, 5), rep(4, 9), rep(5, 104))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Arise&lt;-c(rep(2, 2), rep(4, 16), rep(5, 89))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Chaos&lt;-c(rep(1,4), rep(2, 2), rep(3, 9), rep(4, 20), rep(5, 120))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Roots&lt;-c(rep(1,9), rep(2, 8), rep(3, 17), rep(4, 24), rep(5, 94))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Against&lt;-c(rep(1,16), rep(2, 14), rep(3, 11), rep(4, 20), rep(5, 32))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Nation&lt;-c(rep(1,3), rep(2, 7), rep(3, 6), rep(4, 22), rep(5, 19))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Roorback&lt;-c(rep(1,6), rep(2, 6), rep(3, 5), rep(4, 13), rep(5, 20))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Dante&lt;-c(rep(1,1), rep(2, 3), rep(3, 4), rep(4, 8), rep(5, 30))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Alex&lt;-c(rep(1,1), rep(2, 1), rep(3, 3), rep(4, 6), rep(5, 18))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Kairos&lt;-c(rep(1,3), rep(2, 2), rep(3, 2), rep(4, 6), rep(5, 33))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Mediator&lt;- c(rep(1,0), rep(2, 3), rep(3, 4), rep(4, 6), rep(5, 21))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  morbid&lt;-data.frame(rep(&quot;Morbid&quot;, length(morbid)), rep(1986, length(morbid)), morbid)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Schizo&lt;-data.frame(rep(&quot;Schizo&quot;, length(Schizo)), rep(1987, length(Schizo)), Schizo)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Remains&lt;-data.frame(rep(&quot;remains&quot;, length(remains)), rep(1989, length(remains)), remains)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Arise&lt;-data.frame(rep(&quot;Arise&quot;, length(Arise)), rep(1991, length(Arise)), Arise)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Chaos&lt;-data.frame(rep(&quot;Chaos&quot;, length(Chaos)), rep(1993, length(Chaos)), Chaos)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Roots&lt;-data.frame(rep(&quot;Roots&quot;, length(Roots)), rep(1996, length(Roots)), Roots)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Against&lt;-data.frame(rep(&quot;Against&quot;, length(Against)), rep(1998, length(Against)), Against)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Nation&lt;-data.frame(rep(&quot;Nation&quot;, length(Nation)), rep(2001, length(Nation)), Nation)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Roorback&lt;-data.frame(rep(&quot;Roorback&quot;, length(Roorback)), rep(2003, length(Roorback)), Roorback)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Dante&lt;-data.frame(rep(&quot;Dante&quot;, length(Dante)), rep(2006, length(Dante)), Dante)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Alex&lt;-data.frame(rep(&quot;Alex&quot;, length(Alex)), rep(2009, length(Alex)), Alex)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Kairos&lt;-data.frame(rep(&quot;Kairos&quot;, length(Kairos)), rep(2011, length(Kairos)), Kairos)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Mediator&lt;-data.frame(rep(&quot;Mediator&quot;, length(Mediator)), rep(2013, length(Mediator)), Mediator)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(morbid)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Schizo)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Remains)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Arise)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Chaos)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Roots)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Against)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Nation)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Dante)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Alex)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Kairos)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(Mediator)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\"><br /></span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  SepMax&lt;-rbind(morbid, Schizo, Remains, Arise, Chaos, Roots)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  SepMax$Band&lt;-&quot;Sepultura Max&quot;</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  SepMax$Max&lt;-&quot;Max&quot;</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  SepNoMax&lt;-rbind(Against, Nation, Dante, Alex, Kairos, Mediator)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  SepNoMax$Band&lt;-&quot;Sepultura No Max&quot;</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  SepNoMax$Max&lt;-&quot;No Max&quot;</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  soulfly&lt;-c(rep(1,8), rep(2, 9), rep(3, 4), rep(4, 16), rep(5, 89))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  primitive&lt;-c(rep(1,11), rep(2, 5), rep(3, 5), rep(4, 19), rep(5, 53))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  three&lt;-c(rep(1,1), rep(2, 10), rep(3, 12), rep(4, 7), rep(5, 19))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  prophecy&lt;-c(rep(1,2), rep(2, 5), rep(3, 5), rep(4, 25), rep(5, 42))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  darkages&lt;-c(rep(1,1), rep(2, 1), rep(3, 5), rep(4, 18), rep(5, 36))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  conquer&lt;-c(rep(1,1), rep(2, 0), rep(3, 5), rep(4, 5), rep(5, 31))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  omen&lt;-c(rep(1,0), rep(2, 2), rep(3, 1), rep(4, 6), rep(5, 17))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  enslaved&lt;-c(rep(1,1), rep(2,1), rep(3, 4), rep(4, 2), rep(5, 30))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  savages&lt;-c(rep(1,0), rep(2, 2), rep(3, 3), rep(4, 10), rep(5, 27))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  archangel&lt;-c(rep(1,3), rep(2, 2), rep(3, 4), rep(4, 7), rep(5, 21))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\"><br /></span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  soulfly&lt;-data.frame(rep(&quot;Soulfly&quot;, length(soulfly)), rep(1998, length(soulfly)), soulfly)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  primitive&lt;-data.frame(rep(&quot;Primitive&quot;, length(primitive)), rep(2000, length(primitive)), primitive)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  three&lt;-data.frame(rep(&quot;Three&quot;, length(three)), rep(2002, length(three)), three)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  prophecy&lt;-data.frame(rep(&quot;Prophecy&quot;, length(prophecy)), rep(2004, length(prophecy)), prophecy)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  darkages&lt;-data.frame(rep(&quot;Darkages&quot;, length(darkages)), rep(2005, length(darkages)), darkages)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  conquer&lt;-data.frame(rep(&quot;Conquer&quot;, length(conquer)), rep(2008, length(conquer)), conquer)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  omen&lt;-data.frame(rep(&quot;Omen&quot;, length(omen)), rep(2010, length(omen)), omen)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  enslaved&lt;-data.frame(rep(&quot;Enslaved&quot;, length(enslaved)), rep(2012, length(enslaved)), enslaved)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  savages&lt;-data.frame(rep(&quot;Savages&quot;, length(savages)), rep(2013, length(savages)), savages)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  archangel&lt;-data.frame(rep(&quot;Archangel&quot;, length(archangel)), rep(2015, length(archangel)), archangel)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(soulfly)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(primitive)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(three)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(prophecy)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(darkages)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(conquer)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(omen)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(enslaved)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(savages)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  names(archangel)&lt;-c(&quot;Album&quot;, &quot;Year&quot;, &quot;Rating&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\"><br /></span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Soulfly&lt;-rbind(soulfly, primitive, three, prophecy, darkages, conquer, omen, enslaved, savages, archangel)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Soulfly$Band&lt;-&quot;Soulfly&quot;</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  Soulfly$Max&lt;-&quot;Max&quot;</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  maxvsnomax&lt;-rbind(SepMax, SepNoMax, Soulfly)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  maxvsnomax$Band&lt;-factor(maxvsnomax$Band)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  maxvsnomax$Max&lt;-factor(maxvsnomax$Max)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  maxvsnomax$Album&lt;-factor(maxvsnomax$Album)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  sepvssoul&lt;-subset(maxvsnomax, Band != &quot;Sepultura Max&quot;)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  sepvssoul$Band&lt;-factor(sepvssoul$Band)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  sepvssoul$Album&lt;-factor(sepvssoul$Album)</span></div></div><h4>Graphs in this post</h4><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">library(ggplot2)</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\"><br /></span></div><div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">m &lt;- ggplot(sepvssoul, aes(x = Rating, fill = Band, colour = Band)) </span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  m + geom_histogram(binwidth = 1, alpha = .2, position=\"identity\") + coord_cartesian(xlim = c(0, 6)) + scale_y_continuous(breaks = seq(0, 400, 50)) + labs(x = \"Rating\", y = \"Frequency\", colour = \"Band\", fill = \"Band\") + theme_bw()</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  </span></div><div>  </div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  line &lt;- ggplot(sepvssoul,  aes(Year, Rating, colour = Band))</span></div><div><span style=\"font-family:Courier New, Courier, monospace;font-size:xx-small;\">  line + stat_summary(fun.y = mean, geom = \"point\") + stat_summary(fun.data = mean_cl_boot, geom = \"errorbar\", width = 0.2) + labs(x = \"Year\", y = \"Mean Rating on Amazon.com\") + coord_cartesian(ylim = c(1, 5)) + scale_x_continuous(breaks=seq(1998, 2015, 1))+ theme_bw() + stat_summary(fun.y = mean, geom = \"line\", aes(group=Band))</span></div></div>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}